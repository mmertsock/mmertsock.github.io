<html>
<head>

  
<script type="text/javascript">
  
  function openExternal() {
    window.open("https://www.runningcode.net/cal");
  }
  
  function basicTest() {
var text = "BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:icalendar-ruby\nCALSCALE:GREGORIAN\nMETHOD:PUBLISH\nBEGIN:VEVENT\nDTSTAMP:20200114T212859Z\nUID:6c1fe665-3698-441d-9713-9ef86963bda0\nDTSTART:20200130T160000Z\nDTEND:20200130T170000Z\nLOCATION:The Village Gate\nORGANIZER:Joy's\nSUMMARY:Haircut at Joy's\nEND:VEVENT\nEND:VCALENDAR";
var mime = "text/x-vCalendar;charset=" + document.characterSet;
var data = "data:" + mime + "," + text;
showLog("about to open");
window.location = data;
showLog("opened");
}
  
  (function(a, b) {
      if ("function" == typeof define && define.amd) define([], b);
      else if ("undefined" != typeof exports) b();
      else {
          b(), a.FileSaver = {
              exports: {}
          }.exports
      }
  })(this, function() {
      "use strict";

      function b(a, b) {
          return "undefined" == typeof b ? b = {
                  autoBom: !1
              } : "object" != typeof b && (console.warn("Deprecated: Expected third argument to be a object"), b = {
                  autoBom: !b
              }), b.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type) ? new Blob(["\uFEFF", a], {
                  type: a.type
              }) : a
      }

      function c(b, c, d) {
          var e = new XMLHttpRequest;
          e.open("GET", b), e.responseType = "blob", e.onload = function() {
              a(e.response, c, d)
          }, e.onerror = function() {
              console.error("could not download file")
          }, e.send()
      }

      function d(a) {
          var b = new XMLHttpRequest;
          b.open("HEAD", a, !1);
          try {
              b.send()
          } catch (a) {}
          return 200 <= b.status && 299 >= b.status
      }

      function e(a) {
          try {
              a.dispatchEvent(new MouseEvent("click"))
          } catch (c) {
              var b = document.createEvent("MouseEvents");
              b.initMouseEvent("click", !0, !0, window, 0, 0, 0, 80, 20, !1, !1, !1, !1, 0, null), a.dispatchEvent(b)
          }
      }
      var f = "object" == typeof window && window.window === window ? window : "object" == typeof self && self.self === self ? self : "object" == typeof global && global.global === global ? global : void 0,
          a = f.saveAs || ("object" != typeof window || window !== f ? function() {} : "download" in HTMLAnchorElement.prototype ? function(b, g, h) {
              var i = f.URL || f.webkitURL,
                  j = document.createElement("a");
              g = g || b.name || "download", j.download = g, j.rel = "noopener", "string" == typeof b ? (j.href = b, j.origin === location.origin ? e(j) : d(j.href) ? c(b, g, h) : e(j, j.target = "_blank")) : (j.href = i.createObjectURL(b), setTimeout(function() {
                  i.revokeObjectURL(j.href)
              }, 4E4), setTimeout(function() {
                  e(j)
              }, 0))
          } : "msSaveOrOpenBlob" in navigator ? function(f, g, h) {
              if (g = g || f.name || "download", "string" != typeof f) navigator.msSaveOrOpenBlob(b(f, h), g);
              else if (d(f)) c(f, g, h);
              else {
                  var i = document.createElement("a");
                  i.href = f, i.target = "_blank", setTimeout(function() {
                      e(i)
                  })
              }
          } : function(a, b, d, e) {
              if (e = e || open("", "_blank"), e && (e.document.title = e.document.body.innerText = "downloading..."), "string" == typeof a) return c(a, b, d);
              var g = "application/octet-stream" === a.type,
                  h = /constructor/i.test(f.HTMLElement) || f.safari,
                  i = /CriOS\/[\d]+/.test(navigator.userAgent);
              if ((i || g && h) && "object" == typeof FileReader) {
                  var j = new FileReader;
                  j.onloadend = function() {
                      var a = j.result;
                      a = i ? a : a.replace(/^data:[^;]*;/, "data:attachment/file;"), e ? e.location.href = a : location = a, e = null
                  }, j.readAsDataURL(a)
              } else {
                  var k = f.URL || f.webkitURL,
                      l = k.createObjectURL(a);
                  e ? e.location = l : location.href = l, e = null, setTimeout(function() {
                      k.revokeObjectURL(l)
                  }, 4E4)
              }
          });
      f.saveAs = a.saveAs = a, "undefined" != typeof module && (module.exports = a)
  });

  var ics = function(e, t) {
    showLog("top of ics");
      "use strict"; {
          if (!(navigator.userAgent.indexOf("MSIE") > -1 && -1 == navigator.userAgent.indexOf("MSIE 10"))) {
            showLog("after browser check");
              void 0 === e && (e = "default"), void 0 === t && (t = "Calendar");
              var r = -1 !== navigator.appVersion.indexOf("Win") ? "\r\n" : "\n",
                  n = [],
                  i = ["BEGIN:VCALENDAR", "PRODID:" + t, "VERSION:2.0"].join(r),
                  o = r + "END:VCALENDAR",
                  a = ["SU", "MO", "TU", "WE", "TH", "FR", "SA"];
              return {
                  events: function() {
                      return n
                  },
                  calendar: function() {
                      return i + r + n.join(r) + o
                  },
                  addEvent: function(t, i, o, l, u, s) {
                      if (void 0 === t || void 0 === i || void 0 === o || void 0 === l || void 0 === u) return !1;
                      if (s && !s.rrule) {
                          if ("YEARLY" !== s.freq && "MONTHLY" !== s.freq && "WEEKLY" !== s.freq && "DAILY" !== s.freq) throw "Recurrence rrule frequency must be provided and be one of the following: 'YEARLY', 'MONTHLY', 'WEEKLY', or 'DAILY'";
                          if (s.until && isNaN(Date.parse(s.until))) throw "Recurrence rrule 'until' must be a valid date string";
                          if (s.interval && isNaN(parseInt(s.interval))) throw "Recurrence rrule 'interval' must be an integer";
                          if (s.count && isNaN(parseInt(s.count))) throw "Recurrence rrule 'count' must be an integer";
                          if (void 0 !== s.byday) {
                              if ("[object Array]" !== Object.prototype.toString.call(s.byday)) throw "Recurrence rrule 'byday' must be an array";
                              if (s.byday.length > 7) throw "Recurrence rrule 'byday' array must not be longer than the 7 days in a week";
                              s.byday = s.byday.filter(function(e, t) {
                                  return s.byday.indexOf(e) == t
                              });
                              for (var c in s.byday)
                                  if (a.indexOf(s.byday[c]) < 0) throw "Recurrence rrule 'byday' values must include only the following: 'SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'"
                          }
                      }
                      var g = new Date(l),
                          d = new Date(u),
                          f = new Date,
                          S = ("0000" + g.getFullYear().toString()).slice(-4),
                          E = ("00" + (g.getMonth() + 1).toString()).slice(-2),
                          v = ("00" + g.getDate().toString()).slice(-2),
                          y = ("00" + g.getHours().toString()).slice(-2),
                          A = ("00" + g.getMinutes().toString()).slice(-2),
                          T = ("00" + g.getSeconds().toString()).slice(-2),
                          b = ("0000" + d.getFullYear().toString()).slice(-4),
                          D = ("00" + (d.getMonth() + 1).toString()).slice(-2),
                          N = ("00" + d.getDate().toString()).slice(-2),
                          h = ("00" + d.getHours().toString()).slice(-2),
                          I = ("00" + d.getMinutes().toString()).slice(-2),
                          R = ("00" + d.getMinutes().toString()).slice(-2),
                          M = ("0000" + f.getFullYear().toString()).slice(-4),
                          w = ("00" + (f.getMonth() + 1).toString()).slice(-2),
                          L = ("00" + f.getDate().toString()).slice(-2),
                          O = ("00" + f.getHours().toString()).slice(-2),
                          p = ("00" + f.getMinutes().toString()).slice(-2),
                          Y = ("00" + f.getMinutes().toString()).slice(-2),
                          U = "",
                          V = "";
                      y + A + T + h + I + R != 0 && (U = "T" + y + A + T, V = "T" + h + I + R);
                      var B, C = S + E + v + U,
                          j = b + D + N + V,
                          m = M + w + L + ("T" + O + p + Y);
                      if (s)
                          if (s.rrule) B = s.rrule;
                          else {
                              if (B = "rrule:FREQ=" + s.freq, s.until) {
                                  var x = new Date(Date.parse(s.until)).toISOString();
                                  B += ";UNTIL=" + x.substring(0, x.length - 13).replace(/[-]/g, "") + "000000Z"
                              }
                              s.interval && (B += ";INTERVAL=" + s.interval), s.count && (B += ";COUNT=" + s.count), s.byday && s.byday.length > 0 && (B += ";BYDAY=" + s.byday.join(","))
                          }(new Date).toISOString();
                      var H = ["BEGIN:VEVENT", "UID:" + n.length + "@" + e, "CLASS:PUBLIC", "DESCRIPTION:" + i, "DTSTAMP;VALUE=DATE-TIME:" + m, "DTSTART;VALUE=DATE-TIME:" + C, "DTEND;VALUE=DATE-TIME:" + j, "LOCATION:" + o, "SUMMARY;LANGUAGE=en-us:" + t, "TRANSP:TRANSPARENT", "END:VEVENT"];
                      return B && H.splice(4, 0, B), H = H.join(r), n.push(H), H
                  },
                  download: function(e, t) {
                      if (n.length < 1) return !1;
                      t = void 0 !== t ? t : ".ics", e = void 0 !== e ? e : "calendar";
                      var a, l = i + r + n.join(r) + o;
                      if (-1 === navigator.userAgent.indexOf("MSIE 10")) a = new Blob([l]);
                      else {
                          var u = new BlobBuilder;
                          u.append(l), a = u.getBlob("text/x-vCalendar;charset=" + document.characterSet)
                      }
                      return saveAs(a, e + t), l
                  },
                  build: function() {
                      return !(n.length < 1) && i + r + n.join(r) + o
                  }
              }
          }
          showLog("Unsupported Browser")
      }
  };
    </script>
  
  <style type="text/css">
body
{
  margin: 0;
  padding: 0;
}
input 
{
  border: none;
  padding: 10px;
  margin-top: 10px;
  width: 100%;
  box-sizing: border-box;
  font-size: 16px;
  line-height:20px;
  border-top: solid 1px #ddd;
  border-bottom: solid 1px #ddd;
}
input:focus
{
  outline:none;
}
button
{
  padding: 10px;
  border: solid 1px #0067B1;
  border-radius: 2px;
  color: #0067B1;
  display: inline-block;
  margin-top: 30px;
  min-width: 140px;
  background: #FFF;
  outline: none !important;
  font-size: 16px;
}
button:hover
{
  background: #0067B1;
  color: #FFF;
  cursor: pointer;
}
button:disabled
{
  background: #FFF !important;
  color: #999 !important;
  border-color: #ccc !important;
  cursor: auto;
}
div {
  text-align: center;
}
</style>
  
</head>
<body>
<div>Web View Step Example</div>
<div>
  <button onclick="createIcsFile()">Add to Calendar</button>
  <button onclick="basicTest()">Basic Test</button>
  
<ol id="log"></ol>


  <script>
function showLog(message) {
    let li = document.createElement("li");
    li.innerText = message;
    document.querySelector("#log").append(li);
}

    function createIcsFile() {
            showLog("creating ICS file");
            var cal = ics();
            showLog("created object");
            cal.addEvent('Demo Event', 'This is an all day event', 'Ann Arbor, MI', '1/20/2019', '1/20/2019');
            showLog("added event");
            cal.download();
            showLog("called download");
        }

        showLog("Loaded");
    </script>
  
  
  
<input id="Answer" type="text" />
<button onclick="postAnswer()">Continue</button>
</div>
<script>
function postAnswer() {
}
</script>  
</body>
</html>
